---
layout: single
title: "몰랐던 내용 : GEngine,리플렉션,UHT,UObject,GC,메타데이터,클래스 앞에 붙은 영어 의미"
categories: "newknowledge"
tag: [UE5,C++]

author_profile: true
sidebar:
    nav: "counts"
---

## GEngine,리플렉션,UHT,UObject,GC

### GEngin

GEngine: Unreal Engine의 전역 엔진 객체입니다. 이를 통해 다양한 엔진 기능(로그 출력, 디버깅 메시지 출력,상태 정보 등)에 접근할 수 있습니다.

### 리플렉션

리플렉션(Reflection)은 프로그램이 실행시간에 자기 자신을 조사하는 기능이다. 리플렉션을 프로퍼티시스템 이라고도 부른다. 리플렉션은 그래픽 용어이기도 하기 때문이다.
리플리케이션 시스템은 옵션이다. 리플렉션 시스템에 보이도록 했으면 하는 유형이나 프로퍼티 주석을 달아주면, Unreal Header Tool(UHT)가 그 프로젝트를 컴파일할 때 해당 정보를 수집한다.
UHT가 키워드를 분석해서 정보들을 막 남김(메타데이터) 그정보들을 기반으로 탐색을한다.

UObject를 상속 받으면 Reflection System에 의해 UHT가 실행되어 Uclass 객체를 만들어주고 Uclass객체 내부에 CDO라는 객체 샘플 사본을 하나 만들어 두 개가 준비가 되게하여 메모리를 관리한다.

### UObject

UObject는 언리얼 엔진의 대부분의 객체 유형의 기본 클래스로 언리얼의 모든 오브젝트는 UObject를 상속받는다
UObject를 상속받은 오브젝트를 객체로 만들면 메모리관리를 Unreal에서 제공하는 GC를 할 수 있게된다. 하지만 객체를 만들 때 리플랙션과 함께 선언하지 않으면 NewObject를 사용하여 객체를 만들었다고 하더라도 GC가 메모리를 비워버린다

리플렉션을 가지게 하려면 오브젝트가 포함된 C++클래스 헤더 파일에 모듈명.generated.h 헤더를 포함해야한다. 해당 헤더를 가져야 리플렉션이 있는 시스템에서 해당 클래스를 고려해야 하고 시스템 구현이 필요함을 언리얼 헤더 툴 UHT에 알린다

### GC

GC가 그래프식으로 바라봐서 루트에 연결이 되어있는애들은 냅두는데 연결이 안되어있으면 날려버린다. 그래서 리플렉션문법을 이용해 있다는걸 알려줘야한다. 
UClass를 남기면 클래스에 대한 정보를 남겨주고 그 정보 중에서 멤버변수가 있는데 그 아이들도 언리얼에서 보기를 원하면 남겨줘야한다. 그래서 언리얼에서 빌드를할때 분석을 할 때 보여질 부분을 알려줘야한다.
런타임시간에 UHT이 키워드를 보고 분석해가지고 메타데이터를 남겨가지고 그걸 기반으로 탐색을 한다. 그리고 객체하나를 샘플을 하나 만들어준다.그게 CDO이다. 그래서 클래스객체하나 샘플객체 하나이렇게 두개만들어진다.

## 메타데이터,CDO

### 메타데이터

메타데이터: 클래스,객체,변수 등 프로그래밍 요소에 대한 설명 및 정보를 포함하는 것이다.

### CDO,리플렉션,GC 관리

CDO:기본 상태를 가져옴 Health=100과 같은 초기 값이 CDO에 저장이된다. 그래서 에디터에서 

클래스의 기본 속성을 수정하거나 블루프린트에서 활용할 때 CDO가 사용된다.
일반클래스 객체는 실제로 게임에서 동작을 수행하는 인스턴스이다.

CDO는 언리얼엔진에서 UCLASS로 선언된 모든 클레스에 대해 자동으로 생성되는 객체이다.
메타데이터: 데이터를 설명하는 데이터로 언리얼엔진에서는 리플렉션 시스템에서 객체와 클래스,속성 등에 대한 정보를 제공한다. 속성 정보는 EditAnywhere,BlueprintReadWrite 등

CDO
-실행 초기의 런타임 과정에서는 언리얼 오브젝트마다 클래스 정보와 함께 언리얼 오브젝트 인스턴스가 생성됩니다.
-이 특별한 인스턴스는 언리얼 오브젝트의 기본 세팅을 지정하는데 사용하는데, 이를 클래스 기본 객체(Class Default Object) 줄여서 CDO라고 합니다.

언리얼 엔진은 하나의 오브젝트가 만들어지기 위해서는, 실제 컴파일 전에 언리얼 헤더 툴에 의해 헤더 파일을 분석하는 과정이 선행됩니다.
이 과정이 완료되면 Intermediate 폴더에 언리얼 오브젝트의 정보를 담은 메타 파일이 생성이 됩니다.

메타 소스 파일과 헤드 파일을 생성하는 목적은 여러가지 있지만 C++문법에서 제공하지 못하는 런타임에서의 빠른 클래스 정보의 검색을 하기위해 있습니다.
이 메타 정보는 언리얼 엔진이 지정한 UClass라는 특별한 클래스를 통해 보관됩니다.
UClass에는 언리얼 오브젝트에 대한 클래스 계층 구조 정보와 맴버 변수, 함수에 대한 정보를 모두 기록하고있습니다.

하지만 단순히 검색하는 것에서 더 나아가, 런타임에서 특정 클래스를 검색해 형(Type)을 알아내
인스턴스 맴버 변수 값을 변경하거나 특정 인스턴스의 맴버 함수를 호출하는 것이 가능합니다.
이러한 기능을 리플렉션이라고 부르며 C++에서는 제공을 안해주지만 언리얼 엔진 자체적으로 프레임 워크를 만들어 제공합니다.

견본을 CDO라고부른다.

UCLASS 생성:
CDO가 생성됩니다. -> 클래스의 기본 상태를 저장하는 객체.
메타데이터가 생성됩니다 -> 클래스의 구조와 속성 정보를 설명하는 데이터.

UPROPERTY 선언:
CDO에 변수가 추가됩니다 ->변수가 초기 값과 함께 CDO에 저장됩니다.
메타데이터가 확장됩니다 -> 변수의 속성과 설정 정보가 리플렉션 시스템에 등록됩니다.

GC의 관리:
GC는 메타데이터를 참조하여 객체의 참조 관계를 추적하고, 필요 없는 객체를 삭제합니다.
UPROPERTY로 선언된 변수는 GC가 "이 객체는 참조되고 있다"고 판단할 수 있도록 돕습니다.

FClassFinder<>: UClass를 찾는 역할
FObjectFinder: : CDO를 찾는 역할 , 객체를 찾는애이다.

UStaticMesh
-3D 모델 데이터를 저장하는 리소스 클래스
-UObject->UStaticMesh

UStaticMeshComponent
-UStaticMesh를 기반으로 엑터의 모델을 배치하고 랜더링하는 컴포넌트 클래스
-UScenceComponent->UStaticMesh



## 클래스앞 붙은 영어 의미

클래스앞에 영어붙으면 그 의미
U(UObject 기반 클래스)
-U는 언리얼 엔진의 UObject 클래스를 기반으로 하는 모든 클래스를 나타냅니다.
-이 클래스들은 언리얼 엔진의 리플렉션 시스템(속성, 메타데이터, 블루프린트, 가비지 컬렉션 등)을 활용할 수 있습니다.
UGameplayStatics : 게임플레이 관련 유틸리티 클래스, UWorld : 게임 월드를 나타내는 클래스, UActorComponent : 액터에 추가 가능한 컴포넌트

A (AActor 기반 클래스)
-A는 언리얼 엔진의 AActor 클래스 또는 이를 기반으로 한 클래스를 나타냅니다.
-액터는 월드에 배치될 수 있는 모든 오브젝트입니다.
-ACharacter : 캐릭터를 나타내는 클래스, APlayerController : 플레이어를 제어하는 컨트롤러 클래스

F (구조체)
-F는 구조체(struct)를 나타냅니다.
-메모리 효율적인 데이터 저장 및 전송을 위한 타입으로 사용됩니다.
-FVector : 3D 벡터, FRotator : 회전을 표현하는 구조체, FHitResult : 충돌 정보를 담는 구조체.

T (템플릿)
-T는 템플릿 클래스(Generics)를 나타냅니다.
-언리얼 엔진의 다양한 컨테이너 및 데이터 구조를 구현하는 데 사용됩니다.
-TArray : 배열, TMap : 맵(키-값 쌍), TSet : 집합.

I (인터페이스)
-I는 인터페이스를 나타냅니다.
-인터페이스는 특정 기능을 클래스에 추가하기 위한 추상 클래스입니다.
-IInteractable : 상호작용 가능한 인터페이스, IWeapon : 무기 관련 인터페이스

E (열거형, Enum)
-E는 열거형(enum)을 나타냅니다.
-특정 상태나 옵션을 표현할 때 사용됩니다.
-EGameMode : 게임 모드를 나타내는 열거형, hysicalSurface : 물리적 표면 타입





